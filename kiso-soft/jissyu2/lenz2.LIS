                         4 .list
                         5 **	lenz.s
                         6 **	$00で終了するデータの長さを求めるプログラム
                         7 **
                         8 
                         9 **
                        10 **	STRから始めて、$00が見つかるまで
                        11 **	1バイトずつカウントする
                        12 **	カウント結果はレジスタd0に格納する
                        13 **
                        14 
                        15 .section .text
                        16 start:
000400 4280             17 	clr.l	%d0	/* clrは指定されたレジスタ(d0)を0でクリア  */
000402 4282             18 	clr.l   %d2
000404 41F9 0000        19 	lea	STR, %a0
       0000             19 
                        20 SLEN_LP:	
00040a 1218             21 	move.b	(%a0)+, %d1
00040c 0C01 0000        22 	cmpi.b	#0, %d1	/* d1と0を比較  */
000410 6700 0012        23 	beq	STR_END
000414 5280             24 	addq.l	#1, %d0	/* 1カウントアップする  */
000416 0C01 0069        25 	cmpi.b  #0x69, %d1
00041a 6600 FFEE        26 	bne     SLEN_LP
00041e 5282             27 	addq.l  #1, %d2
000420 6000 FFE8        28 	bra	SLEN_LP
                        29 
                        30 
                        31 STR_END:	
                        32 	** 実行の終り
000424 4E72 2700        33 	stop	#0x2700	/* 終了 */
                        34 
                        35 .section .data
000428 6D69 7373        36 STR:	.dc.b	'm','i','s','s','i','s','s','i','p','p','i',0	
       6973 7369        36 
       7070 6900        36 
                        37 .end
