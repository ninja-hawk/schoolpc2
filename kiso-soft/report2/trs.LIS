                         4 .list
                         5 **************************************************
                         6 ** 
                         7 ** アドレスレジスタa1 で指定されるアドレスから始まる連続する2nバイト
                         8 ** 
                         9 **************************************************
                        10 .section .text
                        11 **************************************************
                        12 ** メインルーチン
                        13 **************************************************
                        14 start:
000400 4EBA 0006        15 	jsr    COPY      /* サブルーチンへ */
000404 4E72 2700        16 	stop   #0x2700   /* プログラム終了 */
                        17 
                        18 **************************************************
                        19 ** データを転送するサブルーチン
                        20 ** a1:読み込みデータのアドレス
                        21 ** a2:書き込みデータのアドレス
                        22 ** d0:書き込み回数
                        23 **************************************************
                        24 
                        25 COPY:
000408 48E7 FFFE        26 	movem.l  %d0-%d7/%a0-%a6,-(%sp) /* レジスタ退避 */
00040c 43F9 0000        27 	lea.l    READ,  %a1 /* 読み込みデータREADの先頭アドレスをa1レジスタへ */
       0000             27 
000412 45F9 0000        28 	lea.l    WRITE, %a2 /* 書き込み先WRITEの先頭アドレスをa2レジスタへ */
       0000             28 
                        29 
000418 7000             30 	moveq.l  #0, %d0 /* 書き込み回数初期化 */
                        31 
                        32 LOOP:
00041a 14D9             33 	move.b   (%a1)+, (%a2)+	/* READからWIRTEへ */
00041c 5280             34 	addq.l   #1, %d0 /* 書き込み回数 +1 */
00041e 0C80 0000        35 	cmp.l    #LENGTH, %d0 /* 書き込み回数 < LENGTH ならば */
       0014             35 
000424 6600 FFF4        36 	bne      LOOP /* LOOPへ */
                        37 
000428 4CDF 7FFF        38 	movem.l (%sp)+,%d0-%d7/%a0-%a6 /* レジスタ復帰 */
00042c 4E75             39 	rts /* サブルーチンから復帰 */	
                        40 **************************************************
                        41 ** データエリア
                        42 **************************************************
                        43 .equ        LENGTH,20
                        44 
                        45 .section .data
                        46 READ:
000430 5441 524F        47 	.ascii  "TAROU               "    /* NAME */
       5520 2020        47 
       2020 2020        47 
       2020 2020        47 
       2020 2020        47 
                        48 
                        49 
                        50 WRITE:
000444 0000 0000        51 	.ds.b 20          /* 書き込みデータ出力先 */
       0000 0000        51 
       0000 0000        51 
       0000 0000        51 
       0000 0000        51 
                        52 
                        53 .end
